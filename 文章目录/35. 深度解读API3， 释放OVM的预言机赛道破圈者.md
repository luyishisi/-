<!--StartFragment-->

近日，API 3 近期获得 400 万美金战略融资，由 DWF Labs 领投，多家知名 VC 跟投。一直以来，预言机（Oracle）赛道基本是 Chainlink 为代表的三方预言机一家独大的局面。十四看到这个新闻的时候也很惊讶\~为何 API 3 能够斩获融资？他会是传统预言机的破圈者吗？他独特在哪儿？API 3 作为去中心化 API（dAPI）项目，定义为“第一方”预言机，通过颇有开创性创新的 OEV Network（基于 ZK-Rollup），解决了“第三方”预言机中间商信任、数据透明度低，OEV（预言机可提取价值）被掌控的普遍问题。

## 1.预言机真能预卜先知吗？

预言机这个名词多少带一些神话色彩，很容易误导大众。但实际上，他指的是为链上智能合约提供**链外真实数据的工具**，但是什么才是真实？如何确保预言机本身的诚信？预言机会作恶吗？多方预言机会串谋吗？如何理解 OVM（预言机可提取价值）呢？

2024 年Q1，DeFi 项目在近期 BTC 大涨之后，锁定的 Token 总价值也突破新高，达到 1750 亿美元，相较于 2023 年Q4的 1030 亿美元，有着接近 70% 的涨幅，而预言机也一直都被称为是 DeFi 的核心血液。在 DeFi 领域，如去中心化交易所（DEX）、借贷平台和衍生品交易平台，都依赖准确的价格数据来运行。2023 年初，polygon 链上去中心化借贷协议 BONQ**使用的 TellorFlex 预言机合约被操控**，攻击者使用较低的成本修改预言机报价后进行抵押借贷获得了巨额利润，项目方因此产生了约 8800 万美元的损失。因为预言机报价问题产生的攻击事件已经屡见不鲜，由此可见，透明可靠的链外数据是支撑 dApp 运作的基本保障。

## 2、预言机是如何连接链下链上?

预言机的工作模式一般有定时上传、事件驱动、请求响应这三种模式。我们以请求响应的一般流程为例，大致分为下面 4 个步骤：

![1.jpg](https://img.learnblockchain.cn/attachments/2024/06/Q4sRjS5s667044c70a251.jpg)

* STEP 1 ：链上，调用方 dApp 发起请求（本质是一笔交易），预言机服务端合约触发链上事件发出
* STEP 2 ：链下，预言机节点监听事件获得信息，通过各自的系统获得准确的链下信息
* STEP 3 ：链下&&链上，预言机以一笔交易形式提供数据数据给预言机服务端合约
* STEP 4 ：链上，预言机服务端合约把数据返回给调用方（dApp），这里有主动推送和 Dapp 二次查询两种方案。

对于这个过程笔者再做个拓展解读：

首先链上需求是公开的，因为事件是 EVM 系区块链的通用机制，也就意味着全网都能知道 Dapp 现在需要 xx 信息了。

其次链下推送是非原子的，链上交易是实时完成，链下数据必然有一定的滞后性

最后如果链上是定制化的需求，则可以让预言机变成第三方的公正角色，从而推送到 Dapp，不过多数类似通用的行情数据，比如 BTC 的实时价格，则会是 Dapp 自己再次调取该合约获取。当然预言机本身也有定时上报机制，以上这这几种基本大差不差。

## 3、Luna 脱钩，风起云涌的预言机赛道

但是区块链并不是只有 Defi，通过预言机，dApp 能够安全且高效地获取链外数据，从而大幅扩展其业务范围和应用场景，使其业务方向得以延伸到金融、保险、供应链管理、物联网等更多领域。

如今的市场让我们以平台 defillama 数据显示，Chainlink 依旧稳坐龙头位置，TVS（预言机等关键基础设施所保障的市场中存入的以美元计价的资产总值）达到了整个市场的 45% 。


![2.jpg](https://img.learnblockchain.cn/attachments/2024/06/gNOYBJi9667044d4d0304.jpg)

细心的读者会发现，上图右侧的曲线在 2022 年 5 月份出现了剧烈的震荡，导火索正是 2022 年著名的 LUNA 崩盘事件， 2022 年 5 月 7 日至 2022 年 5 月 13 日，算法稳定币龙头 UST 先后经历两次脱钩，最终陷入死亡螺旋，LUNA 和 UST 双双崩溃。与此同时，许多使用内部预言机的项目因为对价格波动的反应不及时出现了严重的问题。

下图明显可以看到， 2022 年 5 月份内部预言机（下图粉红色）的市场份额出现断崖式下跌，Chronicle 预言机（下图红色）很好的接住了这一波流量，基本拿下了内部预言机丢失的市场。

![3.jpg](https://img.learnblockchain.cn/attachments/2024/06/ecShum0L667044dfd44f2.jpg)

## 4、第三方预言机的窘境

除了轰动行业的事件之外，似乎预言机的发展被卡住了，确实，由于行业定位很清晰，就是一个链上下数据打通的工具，致使产品功能相对单一。

其中**最令人诟病的是其盈利模式**，目前其盈利点集中在数据订阅收费以及寄希望于项目方发行的代币升值两个大方向上面。显然，单一的数据订阅盈利模式产生的收益有限，以 Chainlink 提供的 VRF（可验证随机序列）收费功能为例，参考区块链浏览器 Etherscan，笔者统计了 VRF V1 和 V2 两个版本的合约锁定的 Token 个数约总计约为 37 万（7+ 30），以当前的 LINK 汇率（$ 16）计算，总计约 600 万美元的收益。VRF V2版本自 2022 年 2 月底上线以来，总计 480 万美元的收益，平均到每个月约 17 万美元（1.1 W LINK）的收益。对比 Chainlink 的大体量，这些利润确实是杯水车薪 m 至于期待代币升值这件事情见仁见智了。

不过预言机由于第三方的特性，本身处于相对中立的地位，开始成本应用层的安全基建的趋势。若能打破传统的中间件印象，进行差异化、系统化的功能扩展，才能提升利润率，比如 LayerZero，作为典型跨链桥，就将安全性寄托在预言机携带的超轻节点请求头上。

总之，预言机的困境在市场层的表现就是，受限于运行模式形成的天然劣势，功能单一，盈利微薄，拓展性还未展开

但是，让我们展开所谓第三方预言机的执行模型，会发现，他的问题也正是来源于“第三方”的因素 API 3 作为预言机新秀，核心定位为“第一方”预言机。

### 4.1 对比第三方与第一方预言机

API 3 选择以激活 API 服务节点的综合运维服务能力为切入点，用更加web3 Native（轻量化+模块化）的方式来搭建预言机需求方和供应方的桥梁。API 运营商基于 API 3 提供的 Airnode 方案，可以快速搭建自己的预言机节点。

作为第一方预言机项目，对比传统第三方预言机的 API 供应商→预言机→Dapp 业务流程，API 3 的（API 供应商+预言机）→Dapp 的转变使得 API 供应商当家做主，不再是仅充当第三方预言机 Worker 的角色，拥有了更多的话语权。


![4.jpg](https://img.learnblockchain.cn/attachments/2024/06/BR8Uz52n667044f04af66.jpg)


如上图，没有了第三方的介入，数据链路减少。当 API 供应商与预言机的角色融为一体，就不会有数据来自哪里的问题，因为**API 提供商的声誉与数据**一起被带到了链上。

由于 API 供应商的声誉与提供数据的强绑定策略，溯源简单，技术上不允许其作恶（而不被发现），同时有保证金机制作为兜底。即便 API 供应商出于私利提供了虚假数据，受损用户仍可申诉进行索赔。对于纠缠不清的事件（如用户恶意投诉骗保），会进入到链上法庭系统进行仲裁。借助于完全去中心化的 API 3 DAO 提供的保险机制，API 3 能够最大程度的惩罚 API 供应商，以及提供赔付给受损用户。

## 5、深入 API 3 DAO 的代币经济模型

API 3 DAO 基于其质押机制使得 API 3 的代币经济模型通过正负反馈得以稳定运转。


![5.jpg](https://img.learnblockchain.cn/attachments/2024/06/NHdnizSi667044fa36bf8.jpg)

### 5.1 质押治理机制

质押机制是 DAO 治理的常规操作质押获利，质押治理，也是循环经济的起点。并且 API 3 还进行了优化：

* 质押者获得质押收益后就跑路怎么办？用户质押产生的膨胀收益（新铸造出来的代币）将延迟发放，同时默认会流向质押池。
* 质押池中的代币还能做什么？可用来赔付用户损失。
* 质押池币价如何稳定？API 3 通过 Burn 与 Token 锁定机制来控制通货膨胀：获得 dAPI 服务的交换条件是用户需要燃烧自己的代币或者锁定自己的代币。
### 5.2 正负反馈循环
* 这样一来，质押池中的代币数量会呈现怎样的趋势呢？会出现无序扩张或者不足以支付赔付而崩盘吗？我们不妨分析一下：
* 当 dAPI 用户增加时，系统风险会提高（系统运营成本随用户数量上升而增加），需要赔付的事件会增加。此时，质押池的代币会减少（用来赔付受损用户），质押者（及管理者）因管理不善导致自身利益受损。但同样的，质押池中的代币数量减少也意味着流向市场的代币数量增加。由于用户手中持有的代币是受通货膨胀影响的，为了自身利益考虑，代币的流向很大一部分还是质押池。
* 当 dAPI 用户减少时，系统风险减小，质押池的代币会逐渐增加，流向市场的代币数量会变得稀缺。但这不意味着质押池的代币数量会一直增加，API 3 DAO 会通过动态控制质押收益（及膨胀率）将其拟合到一个目标健康值。
* 上述两种情况可以很好的形成下图左（a）的正负循环。当任意一种情况达到阀值时，系统就会进行自调节，dAPI 用户会像下图左（b）一样趋于稳定，最终使得系统运行趋于一种健康的状态。

![6.jpg](https://img.learnblockchain.cn/attachments/2024/06/t77sTKUG6670455563f2a.jpg)
其实，这类的 Dao 式治理代币，早就在各种 DeFi 治理中普及，比如笔者之前分析过的去中心化稳定币的详细实现标杆 MakerDao 的 DAI，就有 MKR 作为先行者：

![7.jpg](https://img.learnblockchain.cn/attachments/2024/06/2LLHGNUu66704560016be.jpg)
尤其优美的是他的 4 道拍卖机制：可扩展阅读：《[一文讲清-DeFI 王者 AAVE 最新的稳定币 GHO 提案](http://mp.weixin.qq.com/s?\__biz=MzIyMTQ5MTg5Mw==\&mid=2247483897\&idx=1\&sn=d052091332adde0babaab636d6c9eee2\&chksm=e83aa623df4d2f358321afe974548569f1137003324773a049c1550f2eafc5f5a793112c5172\&scene=21#wechat_redirect)》
 其中的“资不抵债，四道拍卖”栏目。
所以 DAO 式治理是经济稳定性的主流操作模式，但是 API 3 的创新点还不至于次。
## 6、独特优势-开创性的 OEV Network（基于 ZK-Rollup）
### 6.1 OEV 的诞生

 与 MEV（矿工可提取价值）相似 ， OEV（预言机可提取价值）指的是预言机利用其地位来获取原本会流向第三方的价值。MEV 通过交易排序来捕获价值，OEV 是利用链上链下的价格差来提取价值，如关键市场数据或触发重大链上事件（如清算）的情景中。
 
要理解 OEV 是如何产生的，需要先知道预言机目前存在的问题：由于数据上链的成本，目前预言机基本采用定时上传数据的机制，时间间隔设置在一个比较小的范围内。同时，为了避免短期内巨大的价格波动影响到市场，预言机一般会设置一个阀值，当短时间内价格波动范围达到阀值，会主动触发更新。

 尽管这种补救措施能够缓解一部分问题，但是数据上传的时延问题并不能从根本上解决。而 DeFi 市场通常是高度波动的，资产价格可能在短时间内大幅变化，预言机的喂价功能给 DeFi 市场带来的不确定性不容小觑。
 
如此情况下，第三方逐利者如同开了上帝视角，通过利用数据更新的时延，便能捕获巨大的收益，OEV 就此产生。

对于依赖预言机的 dApp，任何数据馈送的更新或者缺失都可能为 OEV 创造机会，例如，抢先交易、套利和清算。因为数据馈送延迟导致产生的可被利用价值的归属问题其实很难去评判，数据上链本身就是有一定波动性，所以如果数据上链延迟了一些，并不能定位到预言机的问题，那么这部分延迟所产生的可利用价值，就不能说是预言机恶意产生的

 ### 6.2 OEV Network—多方博弈的拍卖舞台
 由于 OEV 的存在，用户与 dApp 作为交互的双方，却被第三方从中薅取价值，这些显然是二者不愿看到的局面。API 3 发现预言机拥有优先拒绝捕获所有此类泄漏的价值的权利（链上数据的定价权），于是 OEV NetWork 被提出。
 
作为基于 Polygon zk rollup 的 Network，他是一个单独的订单流（任何参与者改变区块链状态的意图都是订单）拍卖平台，拍卖的是 dAPI 数据的更新权利。

 API 3 自己开发了拍卖平台，消除了对外部服务的依赖，允许利益相关者之间共享 OEV，而无需再分享利润给拍卖平台，在所有集成数据馈送的区块链中实现了 OEV 的内部化。
 
 拍卖成功者可以获得 dAPI 的数据更新权利，将价格数据更新，拍卖的利润会大部分返还给 dApp，极小部分归 API 3 用来覆盖运营成本。显然，当拍卖者（第三方）认为拍卖的成本<更新价格后带来的收益后去才会进行拍卖，因此，第三方也会有利可图。而作为 dApp 平台的用户，看似没有参与利益分配产生实际的利益，实际上得益于 dAPI 给 dApp 提供的优质数据源，能够更好的进行交易和风险管理，会获得潜在受益。
 
拍卖的生命周期如下图所示，当搜索者发现 OEV，会发起竞拍投标。搜索者竞拍中标后会获得更新预言机节点 dAPI 数据的权利，支付竞拍费用后，才可以行使该权利更新预言机节点 dAPI 数据。**支付的拍卖费用便是被捕获到的 OEV，流向 dApp。**

![8.jpg](https://img.learnblockchain.cn/attachments/2024/06/ckwo4QBp667045a0dfdd7.jpg)

拍卖的趋势自然是第三方（搜索者）为了可能存在的利润而进一步提高竞拍价格。**拍卖的价格越高，意味着实际的 OEV 与捕获到的 OEV 的差额越小。**

 至于这块蛋糕到底有多大，我们不妨拭目以待，等测试网稳定运行一段时间后，再来评判。拍卖的结果对于 dApp、API 3 预言机节点、第三方、dAPP 用户这四种种角色来说，几乎是一种共赢的局面，接入 API 3 数据源的 dAPP 被第三方薅取的羊毛最小化，同时还能捕获到绝大部分 OEV 价值，因为市场竞争的最终形态一定是第三方与第三方的竞争，为了寻求利润空间，第三方的利润会逐渐被压缩，最终受益人一定是 dApp。对于 API 3 而言，小部分 OEV 价值可以用来维系 OEV 的商业路径的运行。对于第三方，也能从中分一杯羹。于 dApp 用户，通过激励高度专业化的第三方参与者提供更有洞察力的方法来确定何时更新链上数据点，可以提高粒度，最终辐射到 dAPP 用户受益。
 
 至此，基于 API 3 的 OEV 拍卖方案，多方博弈的利益分配问题得到最大程度的解决，把原来第三方的"错误盈利"馈送回了相关利益方。这样的解决方案，实在是优雅。
 
 可扩展阅读：《[UniswapX 研报(上)：总结V1-3 发展链路，解读下一代 DEX 的原理创新与挑战](http://mp.weixin.qq.com/s?\__biz=MzIyMTQ5MTg5Mw==\&mid=2247484203\&idx=1\&sn=e728ad75369b5596217f628bb078ce84\&chksm=e83aa4f1df4d2de792c693397012f222f60de23a473b9377c33a2edff4ed547ad0544b59c0c7\&scene=21#wechat_redirect)》了解 UniswapX 的拍卖机制。
 ## 7、总结
 API 3 基于自己的代币经济学，构建了具有自驱力的生态系统，通过正负反馈调节使得系统的运行更加稳定。
 
 与此同时，API 3 提出的 OEV Network 通过引入了 dAPI 定价更新权的拍卖机制，巧妙的解决了 OEV 的流向问题，将预言机与 dApp 因 OEV 产生的矛盾巧妙的转移到了第三方。
 
 随着去中心化应用的普及和发展，对于可靠、安全的预言机服务的需求将会不断增长，而下一代预言机的雏形似乎出现了。
 
 **但是，API 3 也面临着一些挑战。**
 
 经济模型并不是一开始界定设计好，就能长期稳定运行的，后续持续的过程往往就会陷入过度治理，或者治理荒废的情况。
 
 并且 API 拍卖，核心在于声誉与收益的衡量，本质是一个乐观模型，而不是悲观模型（ZK），虽然同样采用此声誉结构的 LayerZero 在持续运作以来，即使是预言机+跨链桥双向高风险组合，都一直没有任何市场问题，可以权证其安全性，但依旧存在风险的可能。而持续的赌上声誉，就意味着参与者的市场收益要足够高，这点又和 API 3 的市场发展息息相关。
 
 最后，预言机的市场并不好争夺，根源在于各个 Dapp 最看重的并不仅仅是提供数据的能力，而是预言机本身第三者的定位，如今 API 3 破局了这点，但 Dapp 自己也可以参与拍卖，难免让用户担心其是否会自己串谋，虽然这也意味着赌上他们 Dapp 自己的声誉。并且，老牌 chainlink 等也并非不能跟进，他们也能释放出更多的 OEV 从而继续掌控市场。
 
 可后台留言作者，探讨web3行业问题点赞关注，
 
 十四用技术视角带给你价值周更博主，
 
 推荐加星标减少漏过最新原创观点！

![logo.jpg](https://img.learnblockchain.cn/attachments/2024/06/F1UiIU5k667045d0b51a4.jpg)

  <!--EndFragment-->
